pkgname=watermelonOS
_pkgname=watermelonOS
pkgver=1.0
pkgrel=1
pkgdesc="watermelonOS by Tyrone Watermelon"
arch=('x86_64')
url="https://github.com/stormx920/watermelonOS"
license=(MIT)
depends=(libxinerama libx11 libxft ttf-hack-nerd sudo)
makedepends=(git)
provides=($pkgname)
conflicts=($pkgname)
source=(git+https://github.com/stormx920/watermelonOS)
sha256sums=('SKIP')

#pkgver() {
#	cd "${_pkgname}"
#	printf "%s.r%s.%s" "$(awk '/^VERSION =/ {print $3}' config.mk)" \
#		"$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
#}

prepare() {
	cd $srcdir/${_pkgname}
    git clone https://github.com/stormx920/dwm
    git clone https://github.com/stormx920/dmenu
    git clone https://github.com/stormx920/slstatus
    git clone https://github.com/stormx920/st
}

build(){
    cd $srcdir/${_pkgname}
    #cd "src/$_pkgname"
    cd dmenu
    make
    cd ../dwm
    make
    cd ../slstatus
    make
    cd ../st
    make
}

package(){
    cd "$pkgname"
    cd dmenu
    sudo make install
    cd ../dwm
    sudo make install
    cd ../slstatus
    sudo make install
    cd ../st
    sudo make install
}
